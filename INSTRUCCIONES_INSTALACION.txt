================================================================================
    GUÃA DE INSTALACIÃ“N - PROYECTO MIGRANTE LEGAL
    Paso a paso para montar el proyecto en cualquier equipo
================================================================================

ğŸ“‹ PRERREQUISITOS
================================================================================

1. Instalar Docker Desktop
   - Windows/Mac: https://www.docker.com/products/docker-desktop
   - Linux: https://docs.docker.com/engine/install/
   
   Verificar instalaciÃ³n:
   $ docker --version
   $ docker compose version

2. Instalar Node.js 22 LTS (opcional, solo para desarrollo local sin Docker)
   - Descargar desde: https://nodejs.org/
   
   Verificar instalaciÃ³n:
   $ node --version
   $ npm --version

3. Instalar Git (para clonar el proyecto)
   - Descargar desde: https://git-scm.com/


================================================================================
ğŸš€ PASO 1: OBTENER EL PROYECTO
================================================================================

OpciÃ³n A - Si tienes Git:
   $ git clone <url-del-repositorio>
   $ cd migrantelegal

OpciÃ³n B - Si tienes el .zip:
   1. Descomprimir el archivo migrantelegal.zip
   2. Abrir terminal en la carpeta del proyecto


================================================================================
ğŸ”§ PASO 2: CONFIGURAR VARIABLES DE ENTORNO
================================================================================

1. Copiar el archivo de ejemplo:
   
   Linux/Mac:
   $ cp .env.example .env
   
   Windows (CMD):
   > copy .env.example .env
   
   Windows (PowerShell):
   > Copy-Item .env.example .env

2. Verificar que el archivo .env contenga:
   DATABASE_URL="postgresql://migrantelegal:migrantelegal2026@localhost:5433/migrantelegal_db"
   NODE_ENV="development"


================================================================================
ğŸ³ PASO 3: LEVANTAR EL PROYECTO CON DOCKER
================================================================================

1. AsegÃºrate de estar en la carpeta del proyecto:
   $ pwd  (Linux/Mac)
   > cd   (Windows)
   
   Debe mostrar: /ruta/a/migrantelegal

2. Levantar todos los contenedores:
   $ docker compose up -d --build
   
   Este comando:
   - Descarga las imÃ¡genes necesarias (primera vez)
   - Construye la aplicaciÃ³n
   - Levanta 3 contenedores: postgres, pgadmin, app
   - Tarda 2-5 minutos la primera vez
   
   NOTA: Las imÃ¡genes del sitio web (logo, fotos de abogados, etc.) 
         ya estÃ¡n incluidas en la carpeta public/images/ del proyecto

3. Verificar que los contenedores estÃ©n corriendo:
   $ docker compose ps
   
   DeberÃ­as ver:
   âœ“ migrantelegal-postgres   (Up, healthy)
   âœ“ migrantelegal-pgadmin    (Up)
   âœ“ migrantelegal-app        (Up)


================================================================================
ğŸŒ PASO 4: ACCEDER A LA APLICACIÃ“N
================================================================================

1. AplicaciÃ³n Next.js:
   URL: http://localhost:3001
   
2. pgAdmin (administrador de base de datos):
   URL: http://localhost:5051
   Email: admin@migrantelegal.cl
   Password: admin2026

3. PostgreSQL (solo acceso por cÃ³digo):
   Host: localhost
   Puerto: 5433
   Usuario: migrantelegal
   Password: migrantelegal2026
   Base de datos: migrantelegal_db


================================================================================
âš™ï¸ PASO 5: CONFIGURAR LA BASE DE DATOS (PRIMERA VEZ)
================================================================================

1. Ejecutar migraciones de Prisma:
   $ docker compose exec app npx prisma migrate dev --name init

2. (Opcional) Generar el cliente de Prisma:
   $ docker compose exec app npx prisma generate


================================================================================
ğŸ’» PASO 6: DESARROLLO LOCAL (OPCIONAL)
================================================================================

Si quieres trabajar con autocompletado en VS Code:

1. Instalar dependencias localmente:
   $ npm install

2. Los estilos y cambios se actualizarÃ¡n automÃ¡ticamente gracias a
   Fast Refresh de Docker.


================================================================================
ğŸ“ COMANDOS ÃšTILES
================================================================================

Ver logs en tiempo real:
$ docker compose logs -f app

Reiniciar la aplicaciÃ³n:
$ docker compose restart app

Detener todos los contenedores:
$ docker compose down

Detener y eliminar volÃºmenes (Â¡cuidado, borra la base de datos!):
$ docker compose down -v

Reconstruir desde cero:
$ docker compose down
$ docker compose up -d --build

Ver estado de contenedores:
$ docker compose ps

Ejecutar comandos dentro del contenedor:
$ docker compose exec app sh
$ docker compose exec app npm run dev
$ docker compose exec app npx prisma studio

Limpiar todo Docker (extremo):
$ docker system prune -a
$ docker volume prune


================================================================================
ğŸ” SOLUCIÃ“N DE PROBLEMAS
================================================================================

PROBLEMA: Error "port 3001 is already allocated"
SOLUCIÃ“N: 
   - Cambiar el puerto en docker-compose.yml (lÃ­nea "3001:3001")
   - O detener el servicio que usa el puerto 3001

PROBLEMA: Error "Cannot connect to Docker daemon"
SOLUCIÃ“N:
   - AsegÃºrate de que Docker Desktop estÃ© corriendo
   - Reinicia Docker Desktop

PROBLEMA: Error "Cannot find module"
SOLUCIÃ“N:
   $ docker compose down
   $ docker compose up -d --build

PROBLEMA: Los estilos no se aplican (Tailwind no funciona)
SOLUCIÃ“N:
   1. Verificar que existe postcss.config.js
   2. Verificar que globals.css tenga @import "tailwindcss"
   3. Reiniciar: docker compose restart app
   4. Borrar cachÃ© del navegador (Ctrl+Shift+R)

PROBLEMA: La pÃ¡gina no se actualiza con cambios
SOLUCIÃ“N:
   1. Verificar logs: docker compose logs -f app
   2. Debe mostrar: âœ“ Compiled in XXXms
   3. Si no, reiniciar: docker compose restart app

PROBLEMA: Error al construir "npm ci failed"
SOLUCIÃ“N:
   1. Borrar node_modules y package-lock.json local
   2. Ejecutar: npm install
   3. Reconstruir: docker compose up -d --build


================================================================================
ğŸ“‚ ESTRUCTURA DEL PROYECTO
================================================================================

migrantelegal/
â”œâ”€â”€ docker-compose.yml       # ConfiguraciÃ³n de Docker
â”œâ”€â”€ Dockerfile              # Imagen de la aplicaciÃ³n
â”œâ”€â”€ package.json            # Dependencias de Node.js
â”œâ”€â”€ .env                    # Variables de entorno
â”œâ”€â”€ prisma/
â”‚   â””â”€â”€ schema.prisma       # Schema de base de datos
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ app/
â”‚   â”‚   â”œâ”€â”€ layout.tsx      # Layout global
â”‚   â”‚   â”œâ”€â”€ page.tsx        # PÃ¡gina principal
â”‚   â”‚   â””â”€â”€ globals.css     # Estilos globales
â”‚   â”œâ”€â”€ components/         # Componentes React
â”‚   â”‚   â”œâ”€â”€ Navbar.tsx
â”‚   â”‚   â”œâ”€â”€ Hero.tsx
â”‚   â”‚   â”œâ”€â”€ Services.tsx
â”‚   â”‚   â”œâ”€â”€ Lawyers.tsx
â”‚   â”‚   â””â”€â”€ Footer.tsx
â”‚   â””â”€â”€ lib/               # Utilidades
â”‚       â”œâ”€â”€ prisma.ts
â”‚       â”œâ”€â”€ axios.ts
â”‚       â””â”€â”€ validations.ts
â””â”€â”€ public/                # Archivos estÃ¡ticos
    â””â”€â”€ images/


================================================================================
ğŸ¯ TECNOLOGÃAS UTILIZADAS
================================================================================

Frontend:
- Next.js 15 (App Router)
- React 19
- TypeScript 5.7
- Tailwind CSS 4.0
- React Hook Form + Zod

Backend:
- Next.js API Routes
- Server Actions
- Node.js 22 LTS

Base de Datos:
- PostgreSQL 17
- Prisma 6 (ORM)
- pgAdmin 4

DevOps:
- Docker & Docker Compose
- Fast Refresh para desarrollo


================================================================================
ğŸ“ SOPORTE
================================================================================

Si tienes problemas:
1. Revisa la secciÃ³n "SOLUCIÃ“N DE PROBLEMAS"
2. Verifica los logs: docker compose logs -f app
3. AsegÃºrate de tener Docker corriendo
4. Verifica que los puertos 3001, 5433, 5051 estÃ©n libres


================================================================================
âœ… CHECKLIST DE VERIFICACIÃ“N
================================================================================

[ ] Docker Desktop instalado y corriendo
[ ] Proyecto descargado/clonado
[ ] Archivo .env configurado
[ ] docker compose up -d --build ejecutado exitosamente
[ ] docker compose ps muestra 3 contenedores corriendo
[ ] http://localhost:3001 muestra la aplicaciÃ³n
[ ] pgAdmin accesible en http://localhost:5051
[ ] Fast Refresh funciona (cambios se ven automÃ¡ticamente)


================================================================================
ğŸ‰ Â¡LISTO!
================================================================================

Tu proyecto Migrante Legal estÃ¡ corriendo en:
ğŸ‘‰ http://localhost:3001

Para detener el proyecto:
$ docker compose down

Para volver a iniciar:
$ docker compose up -d

================================================================================
